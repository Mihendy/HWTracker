{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %} HWTracker {% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="shortcut icon" href="{% static 'img/favicon.ico' %}">
</head>

<body>
<nav class="navbar navbar-expand navbar-dark bg-secondary fixed-top">
    <div class="container-fluid">

        <div class="d-flex align-items-center">
            <a class="navbar-brand nav-logo">
                <img src="{% static 'img/logo.png' %}" alt="Logo" width="75" height="auto">
            </a>
            <div class="d-flex flex-column">
                <div class="fw-bold replace"
                     style="font-size: 20px; color: #ffffff;">{{ first_name }} {{ last_name }}</div>
                <div class="d-flex flex-row align-items-center">
                    <div class="group p-2">
                        <img style="filter: invert(1)" src="{% static 'img/group.png' %}" alt="Group" width="25">
                    </div>
                    <div class="fw-bold group" style="font-size: 20px; color: #ffffff;">{{ group }}</div>
                </div>
            </div>
        </div>

        <div class="d-flex align-items-center">
            <div class="fw-bold username p-2"
                 style="font-size: 20px; color: #ffffff;">{{ first_name }} {{ last_name }}</div>

            <a href="/logout" class="btn btn-danger btn-lg" role="button">Выйти
            </a>
        </div>

    </div>
</nav>


<a class="tg-button">
    <img src="{% static 'img/tg.png' %}" alt="Telegram">
</a>

<div class="d-flex flex-column grid-container p-3 w-100">
    {% for date, tasks in data.items %}
        <div class="d-flex">
            <div>{{ date|date:"d.m.Y" }}</div>
            <div class="d-flex flex-wrap">
                {% for task in tasks %}
                    <div {% if task.is_completed %}class="card border-dark mb-3 selectable-card selected-card"{% else %}class="card border-dark mb-3 selectable-card"{% endif %}
                    onclick="checkTask('{{ task.id }}', '{{ task.is_completed }}');"
                         style="width: 18rem; height: 18rem; margin: 1rem;">
                        <div class="card-header" style="font-weight: 800">{{ task.subject }}</div>
                        <div class="card-body">
                            <h5 class="card-title" style="font-size: 14px; font-weight: bold;">{{ task.topic }}</h5>
                            <p class="card-text" style="font-size: 15px;">{{ task.description }}</p>
                            <p class="date">{{ task.due_date|date:"d.m.y H:i" }}</p>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endfor %}

    {% if is_editor %}
        <a href="/taskform" class="add-button">
            <img src="{% static 'img/add-button.png' %}" alt="AddButton">
        </a>
    {% endif %}
</div>
<script src="{% static 'js/tasks.js' %}"></script>
</body>
</html>
